<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
		<script type="text/javascript" src="js/underscore-min.js"></script>
		<script type="text/javascript" src="js/backbone-min.js"></script>
		
		<script type="text/javascript">
			$(document).ready(
				function(){
					myCollection = new InviteeCollection();

					invitee = new InviteeView(
						{
							el:"#invitee",
							collection:myCollection
						}
					);					
				}
			);
			InviteeView = Backbone.View.extend({
				initialize: function(){
					//this.collection.sync('read',this);
					this.collection.fetch();
					this.listenTo(this.collection,'reset',this.onUpdate)
					console.log (this.collection);
				},
				onUpdate:function(){
					console.log (this.collection);
					_.each(this.collection.models,function(e,i){
						var userHandle = e.attributes.handle;
						userHandle = userHandle.replace(/@/g,'');
						console.log(userHandle);
						var imageStr = "https://api.twitter.com/1/users/profile_image?"+userHandle+"=twitterapi&size=bigger";
						////////////////////////////PULL TWITTER IMAGE CODE///////////////////////////////////
						// https://api.twitter.com/1/users/profile_image?screen_name=twitterapi&size=bigger //
						//////////////////////////////////////////////////////////////////////////////////////
						//<div id="user">
						//	<img src=""
						this.$el.append("<h4>"+userHandle+"</h4>");
					},this);
				}
			});
			var InviteeModel = Backbone.Model.extend({
				//urlRoot: './data/data.json'
				url: 'http://localhost:8090/data/invitee.json'
				//url: 'http://twinvite.myt:8000/api/v1/invitee/?format=json&limit=250'
			});
			var InviteeCollection = Backbone.Collection.extend({
				model: InviteeModel,
				//url : 'http://twinvite.myt:8000/api/invitee/?format=json'
				//url: 'data.json',
				url: 'http://localhost:8090/data/invitee.json',

				//url: 'http://twinvite.myt:8000/api/v1/invitee/?format=json&limit=250',
				/*parse: function(resp, xhr) {
					//console.dir(resp.objects);
        	//return resp.objects

    		}*/

			});
		</script>
	</head>
	<body>
		<div id="invitee">
			<ul></ul>
		</div>
	</body>
</html>